<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ランダムカプゲーム</title>
<style>
    :root {
        --bg: #f8f9fa;
        --card-bg: #ffffff;
        --border: #dee2e6;
        --text: #212529;
        --accent: #000000;
        --secondary: #f1f3f5;
        --muted: #6c757d;
        --focus: #000000;
    }

    body {
        font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
        background: var(--bg);
        color: var(--text);
        padding: 60px 20px;
        line-height: 1.8;
        max-width: 1000px;
        margin: 0 auto;
    }

    h1 { 
        text-align: center; 
        margin-bottom: 60px; 
        font-size: 48px; /* タイトルをより大きく */
        font-weight: 800;
        letter-spacing: 0.1em;
    }

    h2, h3 {
        font-weight: 700;
        letter-spacing: 0.02em;
        margin-bottom: 20px;
    }

    .btn-group { text-align: center; margin-bottom: 40px; }

    /* メインボタン（保存・コピー・すべて決定） */
    .primary-btn {
        background: var(--accent);
        color: white;
        border: 1px solid var(--accent);
        padding: 16px 32px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 18px;
        font-weight: 700;
        transition: all 0.2s ease;
        margin: 8px;
    }
    .primary-btn:hover { opacity: 0.8; transform: translateY(-2px); }

    /* 抽選ボタン（引く・削除） */
    .roll-btn {
        background: white;
        color: var(--text);
        border: 1px solid var(--border);
        padding: 6px 14px;
        border-radius: 4px;
        font-size: 14px;
        cursor: pointer;
        margin-left: auto;
    }
    .roll-btn:hover { background: var(--secondary); border-color: var(--muted); }

    /* ＋質問・＋出来事ボタン */
    .add-btn {
        display: block;
        width: 100%;
        background: var(--secondary);
        color: var(--text);
        border: 2px dashed var(--border);
        padding: 15px;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        margin-top: 20px;
        transition: 0.2s;
    }
    .add-btn:hover { background: #e9ecef; border-color: var(--muted); }

    .row {
        display: flex;
        gap: 30px;
        margin-bottom: 30px;
        flex-wrap: wrap;
    }

    .card {
        flex: 1;
        min-width: 320px;
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.03);
    }

    .card h2 {
        font-size: 22px;
        border-left: 5px solid var(--accent);
        padding-left: 15px;
        margin-bottom: 30px;
    }

    .result-box {
        margin-bottom: 18px;
        padding-bottom: 14px;
        border-bottom: 1px solid var(--secondary);
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .result-label { 
        font-size: 13px; 
        color: var(--muted); 
        width: 100px;
        flex-shrink: 0;
    }

    .result-val { 
        font-weight: 700; 
        font-size: 18px; 
        flex-grow: 1;
    }

    select, textarea {
        width: 100%;
        box-sizing: border-box;
        padding: 12px;
        border: 1px solid var(--border);
        border-radius: 6px;
        font-size: 16px;
        background: #fff;
        transition: border-color 0.2s;
        font-family: inherit;
    }

    textarea:focus {
        outline: none;
        border-color: var(--focus);
        background: #fff;
    }

    textarea {
        overflow: hidden;
        resize: none;
        min-height: 48px;
        display: block;
    }

    .section {
        margin-top: 60px;
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 40px;
    }

    .section h2 { font-size: 26px; margin-bottom: 30px; border-bottom: 2px solid var(--accent); padding-bottom: 10px; display: inline-block; }

    .item-box {
        background: var(--bg);
        padding: 25px;
        border-radius: 10px;
        margin-bottom: 20px;
        position: relative;
        border: 1px solid var(--border);
    }

    .detail-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
    }

    .detail-title {
        font-weight: 700;
        font-size: 14px;
        margin-top: 20px;
        margin-bottom: 6px;
        display: block;
        color: var(--muted);
        letter-spacing: 0.05em;
    }

    /* 設定エリア */
    .master-data {
        margin-top: 120px;
        padding: 40px;
        background: #eee;
        font-size: 13px;
        border-radius: 12px;
    }
    .master-data textarea {
        font-size: 13px;
        min-height: 100px;
        resize: vertical;
        overflow-y: auto;
    }

    @media (max-width: 768px) {
        .detail-grid { grid-template-columns: 1fr; }
        .row { flex-direction: column; }
        h1 { font-size: 32px; }
    }
</style>
</head>
<body>

<h1>🎲 ランダムカプゲーム</h1>

<div class="btn-group">
    <button class="primary-btn" onclick="rollAll()" style="font-size: 24px; padding: 20px 60px;">すべてランダムに決定</button>
</div>

<div class="row">
    <div class="card">
        <h2>CHARACTER 1</h2>
        <div class="result-box">
            <span class="result-label">性別</span>
            <select id="gender1">
                <option value="男性">男性</option>
                <option value="女性">女性</option>
                <option value="中性">中性</option>
            </select>
        </div>
        <div class="result-box">
            <span class="result-label">属性</span>
            <div class="result-val" id="attr1">-</div>
            <button class="roll-btn" onclick="rollGenderAttr(1)">引く</button>
        </div>
        <div class="result-box">
            <span class="result-label">肩書き</span>
            <div class="result-val" id="title1">-</div>
            <button class="roll-btn" onclick="slot('title1', masterData.title)">引く</button>
        </div>
        <div class="result-box">
            <span class="result-label">相手への想い</span>
            <div class="result-val" id="feel1">-</div>
            <button class="roll-btn" onclick="slot('feel1', masterData.feel)">引く</button>
        </div>
        <textarea class="save-target auto-resize" data-label="C1メモ" placeholder="自由メモ" style="margin-top:20px;"></textarea>
    </div>

    <div class="card">
        <h2>CHARACTER 2</h2>
        <div class="result-box">
            <span class="result-label">性別</span>
            <select id="gender2">
                <option value="男性">男性</option>
                <option value="女性">女性</option>
                <option value="中性">中性</option>
            </select>
        </div>
        <div class="result-box">
            <span class="result-label">属性</span>
            <div class="result-val" id="attr2">-</div>
            <button class="roll-btn" onclick="rollGenderAttr(2)">引く</button>
        </div>
        <div class="result-box">
            <span class="result-label">肩書き</span>
            <div class="result-val" id="title2">-</div>
            <button class="roll-btn" onclick="slot('title2', masterData.title)">引く</button>
        </div>
        <div class="result-box">
            <span class="result-label">相手への想い</span>
            <div class="result-val" id="feel2">-</div>
            <button class="roll-btn" onclick="slot('feel2', masterData.feel)">引く</button>
        </div>
        <textarea class="save-target auto-resize" data-label="C2メモ" placeholder="自由メモ" style="margin-top:20px;"></textarea>
    </div>
</div>

<div class="section">
    <h2>二人の関係性</h2>
    <div id="relation-container">
        <textarea class="save-target auto-resize" data-label="二人の関係性" placeholder=""></textarea>
    </div>
</div>

<div class="section">
    <h2>深掘り質問</h2>
    <div id="deep-container"></div>
    <button class="add-btn" onclick="addExtra('deep')">＋ 質問を引く</button>
</div>

<div class="section">
    <h2>出来事</h2>
    <div id="event-container"></div>
    <button class="add-btn" onclick="addExtra('event')">＋ 出来事を引く</button>
</div>

<div class="section">
    <h2>細かい設定</h2>
    <div class="detail-grid">
        <div>
            <h3>CHARACTER 1</h3>
            <span class="detail-title">名前</span><textarea class="save-target auto-resize" data-label="C1名前"></textarea>
            <span class="detail-title">一人称</span><textarea class="save-target auto-resize" data-label="C1一人称"></textarea>
            <span class="detail-title">二人称</span><textarea class="save-target auto-resize" data-label="C1二人称"></textarea>
            <span class="detail-title">相手からの呼ばれ方</span><textarea class="save-target auto-resize" data-label="C1被呼称"></textarea>
            <span class="detail-title">見た目</span><textarea class="save-target auto-resize" data-label="C1外見"></textarea>
            <span class="detail-title">口調</span><textarea class="save-target auto-resize" data-label="C1口調"></textarea>
        </div>
        <div>
            <h3>CHARACTER 2</h3>
            <span class="detail-title">名前</span><textarea class="save-target auto-resize" data-label="C2名前"></textarea>
            <span class="detail-title">一人称</span><textarea class="save-target auto-resize" data-label="C2一人称"></textarea>
            <span class="detail-title">二人称</span><textarea class="save-target auto-resize" data-label="C2二人称"></textarea>
            <span class="detail-title">相手からの呼ばれ方</span><textarea class="save-target auto-resize" data-label="C2被呼称"></textarea>
            <span class="detail-title">見た目</span><textarea class="save-target auto-resize" data-label="C2外見"></textarea>
            <span class="detail-title">口調</span><textarea class="save-target auto-resize" data-label="C2口調"></textarea>
        </div>
    </div>
</div>

<div class="btn-group" style="margin-top: 100px;">
    <button class="primary-btn" onclick="saveText()">💾 設定を.txtで保存</button>
    <button class="primary-btn" onclick="copyToClipboard()">📋 クリップボードにコピー</button>
</div>

<div class="master-data">
    <h3>⚙️ 抽選項目の編集</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
        <div>属性（男性）<textarea id="master-attr-male" oninput="updateMaster()">
クール
ツンデレ
ヤンデレ
熱血
元気
カリスマ
おバカ
ドジ
ダウナー系
おっとり
鈍感
ヘタレ
王子様
ドS
ドM
健気
ピュア
天真爛漫
お調子者
冷徹
真面目
不真面目
不器用
陰キャ
陽キャ
天才
凡人
努力家
ナルシスト
献身的
おかん気質
犬っぽい
猫っぽい
爽やか
癒し系
ガサツ
遊び人
不幸体質
ミステリアス
孤高
フレンドリー
破天荒
天然
変人
自由人
毒舌
素直
正義感が強い
自己犠牲的
優しい
強引
意地悪
儚げ
メンヘラ
情熱的
穏やか
完璧主義
無気力
腹黒い
裕福
ロマンチスト
セクシー
可愛い系
あざとい
利己的
反抗的
堅物
お人好し
ひねくれ
毒舌
無口
無表情
短気
嘘つき
バカ正直
ネガティブ
ポジティブ
サイコパス
人気者
ぼっち
変態
いじられキャラ
人嫌い
人間不信
シャイ
臆病
泣き虫
空気が読めない
不思議キャラ
勝気
生意気
能天気
高飛車
オタク
少女趣味
オカルトマニア
自己肯定感低い
不憫
俺様
チャラ男
オカマ
オラオラ系
ワイルド
中性的</textarea></div>
<div>属性（女性）<textarea id="master-attr-female" oninput="updateMaster()">
クール
ツンデレ
ヤンデレ
熱血
元気
カリスマ
おバカ
ドジ
ダウナー系
おっとり
鈍感
ヘタレ
王子様
ドS
ドM
健気
ピュア
天真爛漫
お調子者
冷徹
真面目
不真面目
不器用
陰キャ
陽キャ
天才
凡人
努力家
ナルシスト
献身的
おかん気質
犬っぽい
猫っぽい
爽やか
癒し系
ガサツ
遊び人
不幸体質
ミステリアス
孤高
フレンドリー
破天荒
天然
変人
自由人
毒舌
素直
正義感が強い
自己犠牲的
優しい
強引
意地悪
儚げ
メンヘラ
情熱的
穏やか
完璧主義
無気力
腹黒い
裕福
ロマンチスト
セクシー
可愛い系
あざとい
利己的
反抗的
堅物
お人好し
ひねくれ
毒舌
無口
無表情
短気
嘘つき
バカ正直
ネガティブ
ポジティブ
サイコパス
人気者
ぼっち
変態
いじられキャラ
人嫌い
人間不信
シャイ
臆病
泣き虫
空気が読めない
不思議キャラ
勝気
生意気
能天気
高飛車
オタク
少女趣味
オカルトマニア
自己肯定感低い
不憫
ギャル
ボーイッシュ
ぶりっこ
小悪魔
姉御肌
清楚
中性的</textarea></div>
<div>属性（中性）<textarea id="master-attr-neu" oninput="updateMaster()">
クール
ツンデレ
ヤンデレ
熱血
元気
カリスマ
おバカ
ドジ
ダウナー系
おっとり
鈍感
ヘタレ
王子様
ドS
ドM
健気
ピュア
天真爛漫
お調子者
冷徹
真面目
不真面目
不器用
陰キャ
陽キャ
天才
凡人
努力家
ナルシスト
献身的
おかん気質
犬っぽい
猫っぽい
爽やか
癒し系
ガサツ
遊び人
不幸体質
ミステリアス
孤高
フレンドリー
破天荒
天然
変人
自由人
毒舌
素直
正義感が強い
自己犠牲的
優しい
強引
意地悪
儚げ
メンヘラ
情熱的
穏やか
完璧主義
無気力
腹黒い
裕福
ロマンチスト
セクシー
可愛い系
あざとい
利己的
反抗的
堅物
お人好し
ひねくれ
毒舌
無口
無表情
短気
嘘つき
バカ正直
ネガティブ
ポジティブ
サイコパス
人気者
ぼっち
変態
いじられキャラ
人嫌い
人間不信
シャイ
臆病
泣き虫
空気が読めない
不思議キャラ
勝気
生意気
能天気
高飛車
オタク
少女趣味
オカルトマニア
自己肯定感低い
不憫</textarea></div>
<div>肩書き<textarea id="master-title" oninput="updateMaster()">
中学生
高校生
大学生
教師
大学教授
家庭教師
塾講師
医者
精神科医
看護師
薬剤師
カウンセラー
会社員
社長
秘書
営業
フリーター
シェフ
パティシエ
バリスタ
バーテンダー
飲食店店員
美容師
メイクアップアーティスト
アパレル店員
モデル
俳優
声優
アイドル
ダンサー
歌手
小説家
漫画家
イラストレーター
デザイナー
画家
学芸員
写真家
演奏家
作曲家
バンドマン
お笑い芸人
映画監督
テレビ局スタッフ
警察官
刑事
消防士
自衛官
役所職員
整備士
プログラマー
建築士
ヤクザ
マフィア
殺し屋
詐欺師
スパイ
ハッカー
科学者
考古学者
探偵
記者
無職
スポーツ選手
配達員
農家
書店員
司書
夜職（キャバ嬢、ホスト）
聖職者
霊能者
マジシャン
メイド・執事
コンビニ店員
プロゲーマー
インフルエンサー
YouTuber
Vtuber
吸血鬼
天使
悪魔
夢魔
幽霊
人魚
ロボット
宇宙人
神様
変身ヒーロー・ヒロイン
魔法少女</textarea></div>
<div>相手への想い<textarea id="master-feel" oninput="updateMaster()">
大好き
愛している
恋している
相手で頭がいっぱい
甘やかしたい
甘えたい
守りたい
無自覚に惹かれている
認めたくないが惹かれている
尊敬している
幸せになってほしい
相手の存在が支え
かわいいと思っている
かっこいいと思っている
面白いと思っている
運命の人だと思っている
ずっと一緒にいたい
放っておけない
信頼している
恩がある
一緒にいると安心する
家族のように思っている
友達
相棒
同志
価値観が合う
価値観が違う
自分のことを忘れて欲しい
自分のことを忘れてほしくない
相手のことを忘れたい
昔は嫌いだったが今は違う
昔は好きだったが今は違う
腐れ縁
ライバル
羨ましい
なんとなく苦手
大嫌い
許せないことがある
裏切られた
憎んでいる
恨みがある
気に食わない
敵だと思っている
怖い
どう接すればいいかわからない
なんだか気になる
相手への感情が自分でもわからない
心配している
困った人だと思っている
都合がいい相手
観察対象
無関心
子供だと思っている
崇拝している
依存している
支配したい
支配されたい
好きすぎて壊したい
いじめたい
罪悪感がある
秘密を握られている
執着している</textarea></div>
        <div>深掘り質問<textarea id="master-deep" oninput="updateMaster()">
二人はどんな経緯でその肩書きになった？
二人が出会ったきっかけは？
二人が初めて会ったときの第一印象は？
二人が一緒にいるときの空気感は？（賑やか・静か・緊張感など）
相手の好きなところは？
相手の嫌なところは？
一緒にいて一番幸せだと感じる瞬間は？
相手との関係で一番つらいと感じることは？
相手への想いが生まれたきっかけは？
相手への想いは日常生活にどんな影響を与えている？
相手への想いを相手や周りに知られたくない？
相手を見つけた時の反応は？
相手より大切なものはある？
相手のためならどこまでできる？
普段の姿と相手といるときの姿は違う？
二人の間に秘密はある？
二人の関係を周囲はどう思っている？
どちらが先に告白した？（あるいはする？）
二人はスキンシップをどれくらいの頻度でする？（あるいはしたい？）
二人のチャットやメッセージでのやりとりはどんな感じ？
相手に一番キュンとする瞬間は？
二人の生活力はどんな感じ？
二人の趣味は何？
二人は休日に何をしてる？
二人は仕事（あるいは学校）は好き？
二人の愛情表現はどんな感じ？
二人にとって幸せとは？
二人の「信念・譲れないもの」は？
二人のコンプレックスは？
二人はトラウマはある？
二人の家族はどんな感じ？
二人のSNSの使い方は？
二人の目標・夢は？
よりメンタルが強いのはどっち？
より肉体的に強いのはどっち？
より愛が深いのはどっち？
より愛が重いのはどっち？
よりテンションが高いのはどっち？
より社交的なのはどっち？
問題を起こしがちなのはどっち？
リードする方はどっち？</textarea></div>
        <div>出来事<textarea id="master-event" oninput="updateMaster()">
喧嘩した（どんな理由・どんな風に）
食事する（どこで・何を・どんな風に）
お酒を飲む（どこで・どんな風に・どうなる）
相手を褒める（どんな風に・どれだけ）
相手に悪口を言える？言えるなら何と言う？
プレゼントを贈る（何を・どんな風に）
買い物に行く（どこで・何を・どんな風に）
一緒にテレビやサブスクを観る（何を・どんな風に）
一緒にゲームをする（何を・どんな風に）
一緒にスポーツをする（何を・どんな風に）
旅行に行く（どこに・どんな風に）
サプライズをする（どんな時・どんな風に）
片方が舞台や大会などのイベントに出る（もう片方はどうする？）
片方がとても忙しい（もう片方はどうする？）
片方が風邪を引いた（もう片方はどうする？）
片方が怪我をした（もう片方はどうする？）
片方がナンパされた（そのキャラはどうする・もう片方はどうする？）
片方が誰かに告白された（そのキャラはどうする・もう片方はどうする？）
家に行く
公園に行く
海に行く
山に行く
水族館に行く
動物園に行く
遊園地に行く
美術館に行く
博物館に行く
科学館に行く
映画館に行く
スポーツ観戦に行く
キャンプに行く
ピクニックに行く
プールに行く
カラオケに行く
カフェに行く
コンビニに行く
一緒の家で暮らす
コスプレする
写真を撮る
誕生日
お正月
バレンタインデー
エイプリルフール
ハロウィン
クリスマス
桜が満開になった
大雪が降った
急に雨が降り出した
お祭り
片方が透明人間になった
片方が時間を止める能力を手にした
片方が怪物の姿になった
片方が幼児化した
片方が記憶喪失になった
片方が手乗りサイズになった
相手の心が読めるようになる
性別が逆転した
お互いが入れ替わった
謎の部屋に閉じ込められた
片方が死んだ
片方が誰かを殺した
片方がストーカー被害に遭う
片方がヤンキーに絡まれる
片方が誘拐される
正直な自分の気持ちを相手に伝える
相手に嘘をつく
相手を傷つける
相手を癒す
相手の家族に会う
相手が泣いているのを見つける
相手が他の誰かと楽しそうにしているのを見つける
相手の悪い噂を聞く
相手を助ける
逃げる（何から・なんのために・どうやって）
隠れる（何から・なんのために・どうやって）
相手を尾行する
相手への想いが抑えられなくなる
相手への想いを相手が知る
バッドエンド
ハッピーエンド
メリーバッドエンド</textarea></div>
    </div>
</div>

<script>
const storeKeyMaster = "cp_game_master_v6";
let masterData = {};

function adjustHeight(el) {
    if (el.closest('.master-data')) return;
    el.style.height = 'auto';
    el.style.height = el.scrollHeight + 'px';
}

document.addEventListener('input', e => {
    if (e.target.tagName.toLowerCase() === 'textarea') adjustHeight(e.target);
});

window.onload = () => {
    const savedMaster = localStorage.getItem(storeKeyMaster);
    if (savedMaster) {
        masterData = JSON.parse(savedMaster);
        document.getElementById('master-attr-male').value = masterData.attrMale.join('\n');
        document.getElementById('master-attr-female').value = masterData.attrFemale.join('\n');
        document.getElementById('master-attr-neu').value = masterData.attrNeu.join('\n');
        document.getElementById('master-title').value = masterData.title.join('\n');
        document.getElementById('master-feel').value = masterData.feel.join('\n');
        document.getElementById('master-deep').value = masterData.deep.join('\n');
        document.getElementById('master-event').value = masterData.event.join('\n');
    } else {
        updateMaster();
    }
};

function updateMaster() {
    masterData = {
        attrMale: document.getElementById('master-attr-male').value.split('\n').filter(v => v),
        attrFemale: document.getElementById('master-attr-female').value.split('\n').filter(v => v),
        attrNeu: document.getElementById('master-attr-neu').value.split('\n').filter(v => v),
        title: document.getElementById('master-title').value.split('\n').filter(v => v),
        feel: document.getElementById('master-feel').value.split('\n').filter(v => v),
        deep: document.getElementById('master-deep').value.split('\n').filter(v => v),
        event: document.getElementById('master-event').value.split('\n').filter(v => v)
    };
    localStorage.setItem(storeKeyMaster, JSON.stringify(masterData));
}

function slot(id, list) {
    const el = document.getElementById(id);
    let count = 0;
    const interval = setInterval(() => {
        el.textContent = list[Math.floor(Math.random() * list.length)];
        count++;
        if (count > 12) clearInterval(interval);
    }, 40);
}

function rollGenderAttr(num) {
    const gender = document.getElementById(`gender${num}`).value;
    let list;
    if (gender === '男性') list = masterData.attrMale;
    else if (gender === '女性') list = masterData.attrFemale;
    else list = masterData.attrNeu;
    slot(`attr${num}`, list);
}

function rollAll() {
    rollGenderAttr(1); slot('title1', masterData.title); slot('feel1', masterData.feel);
    rollGenderAttr(2); slot('title2', masterData.title); slot('feel2', masterData.feel);
}

function addExtra(type) {
    const container = document.getElementById(`${type}-container`);
    const list = masterData[type];
    if (!list.length) return;
    const text = list[Math.floor(Math.random() * list.length)];
    const div = document.createElement('div');
    div.className = 'item-box';
    div.innerHTML = `
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
            <strong style="font-size:18px;">${text}</strong>
            <button class="roll-btn" style="color:var(--muted); border:none;" onclick="this.parentElement.parentElement.remove()">✕ 削除</button>
        </div>
        <textarea class="save-target auto-resize" data-label="${type === 'deep' ? '質問' : '出来事'}: ${text}"></textarea>
    `;
    container.appendChild(div);
    const ta = div.querySelector('textarea');
    adjustHeight(ta);
}

function buildExportText() {
    let txt = "【ランダムカプ設定】\n\n";
    for(let i=1; i<=2; i++){
        const g = document.getElementById(`gender${i}`).value;
        const a = document.getElementById(`attr${i}`).textContent;
        const t = document.getElementById(`title${i}`).textContent;
        const f = document.getElementById(`feel${i}`).textContent;
        if(a !== "-") txt += `CHARACTER ${i}: [${g}] ${a} / ${t} / 相手への想い: ${f}\n`;
    }
    txt += "\n";

    document.querySelectorAll('.save-target').forEach(el => {
        const label = el.getAttribute('data-label');
        const val = el.value.trim();
        if (val) txt += `■ ${label}\n${val}\n\n`;
    });
    return txt.trim();
}

function saveText() {
    const txt = buildExportText();
    const blob = new Blob([txt], {type: "text/plain"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = `cp_setting.txt`;
    a.click();
}

function copyToClipboard() {
    const txt = buildExportText();
    navigator.clipboard.writeText(txt).then(() => alert("コピーしました"));
}
</script>

</body>
</html>



